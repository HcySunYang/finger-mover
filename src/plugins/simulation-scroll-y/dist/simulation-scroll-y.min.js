/*!
 * simulation-scroll-y.min.js v1.2.2
 * (c) 2017 HcySunYang
 * Released under the MIT License.
 */!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.simulationScrollY=n()}(this,function(){"use strict";return function(t){return function(n){function e(t,n){if(S)return void s(S,"height: "+n+"px;");S=document.createElement("span"),s(S,"\n                position: absolute;\n                z-index: 10000000;\n                top:0;\n                right: 3px;\n                width: 3px; \n                height: "+n+"px; \n                background-color: #000;\n                border-radius: 1.5px;\n                transition: opacity .2s;\n                -webkit-transition: opacity .2s;\n                transform: translateZ(0.01px);\n                opacity: 0;\n            "),t.appendChild(S)}function o(t){var n=t,e=0;n<E?(e=4*(E-n),e>b-w&&(e=b-w),n=E):n>y&&(e=4*(n-y),e>b-w&&(e=b-w),n=y+e);var o=b-e;S.style.height=o+"px",B.transform(S,"translateY",n),B.transform(S,"translateZ",.01)}var r=n.Moved,a=(n.transform,n.getStyle),i=n.extend,s=n.cssText,l=n.getPropFromMatrix,c=n.getRelativeRect,u=n.isInElement,f=n.throwError,d=function(){},p=i({scrollBar:!0,bounce:!0,unidirectional:!1,pullDown:{use:!1,distance:50,onBegin:d,onActive:d,onAfter:d},loadMore:{distance:0,onLoadMore:d},onTouchStart:d,onTouchMove:d,onTouchEnd:d,onTransMove:d,onTransMoveEnd:d,onMotionStop:d},t),h=null,m=null,v=0,g=0,M=0,S=null,b=0,w=7,T=0,Y=0,D=0,x=0,E=0,y=0,B=new r,k=0,O=0,z="easeOutStrong",I=0,A=!1,F=!1,C=!1,L=!1,N=0,R=!1,X=!1,Z=!1,j=!1,q=!1,H=!1,P=d,G=d,J={},K=!1,Q=!1,U=p.scrollBar;return{init:function(t){h=t.el,m=h.parentNode,"static"===a(h,"position")&&s(h,"position: relative; z-index: 10;"),"static"===a(m,"position")&&s(m,"position: relative;"),this.refreshSize()},start:function(t){t.fingers[0];z="easeOutStrong",F=!1,j="stop"!==B.moveStatus,C=!1,L=!1,K=!1,Q=!1,J={},k>T&&(k/=.5),j||p.onTouchStart(j),B.stop(function(t){Z=!1,N=k=t.translateY,p.onTouchStart(!0),p.onMotionStop(N)})},move:function(t){if("start"===B.moveStatus)return!1;Z=!0;var n=t.fingers[0];if(!n.fingerInElement)return F||(F=!0,this.makeMove(n)),!1;if(J=n.direction,(J.top||J.bottom)&&!K&&Math.abs(n.distanceY)>=10&&(Q=!0),(J.left||J.right)&&!Q&&Math.abs(n.distanceX)>=10&&(K=!0),Math.abs(n.distanceY)<10&&Math.abs(n.distanceX)<10)return!1;if(Q||!p.unidirectional){var e=n.distanceY>0?n.distanceY-10:n.distanceY+10;N=k+e,N>T||D>0?N=p.bounce?T+.5*(N-T):T:N<D&&(N=p.bounce?D+.5*(N-D):D),N<=x&&!X&&J.top&&(X=!0,p.loadMore.onLoadMore.call(this)),B.transform(n.el,"translateY",N),p.scrollBar&&(s(S,"opacity: .4;"),o(-N*M)),p.pullDown&&p.pullDown.use&&N>0&&!R&&p.pullDown.onBegin&&p.pullDown.onBegin.call(this,N),p.onTouchMove.call(this,N)}return!(Q&&p.unidirectional||j)&&void 0},end:function(t){if(K&&!A)return p.onTouchEnd(B.moveStatus),!1;var n=t.fingers[0],e=t.changeFingerIndex,o=t.fingerNumber,r=n.fingerInElement;Z=!1,0===e&&0===o&&r&&this.makeMove(n),p.onTouchEnd("start"===B.moveStatus)},cancel:function(t){var n=t.fingers[0],e=t.changeFingerIndex,o=t.fingerNumber,r=n.fingerInElement;0===e&&0===o&&r&&(k+=n.distanceY)},makeMove:function(t){function n(n){var o=Math.abs(n-k)/Math.abs(t.transDistanceY)*t.transTime;return o<500?(o=500,e=2):o>2e3&&(o=2e3),o}var e;if(I=t.transTime,k=N,O=k+t.transDistanceY,p.pullDown&&p.pullDown.use&&k>=p.pullDown.distance&&!R)return R=!0,p.pullDown.onActive&&p.pullDown.onActive.call(this),T+=p.pullDown.distance,void this.scrollTo(p.pullDown.distance,300);p.pullDown&&p.pullDown.use&&k>T&&(L=!0),k>T||D>0?(O=T,z="easeOutStrong",I=p.bounce?500:t.transTime,A=!0):k<D?(O=D,z="easeOutStrong",I=p.bounce?500:t.transTime,A=!0):O<D?p.bounce?(O=D,z="backOut",I=n(D)):z="easeOutStrong":O>T&&(p.bounce?(O=T,z="backOut",I=n(T)):z="easeOutStrong"),Math.abs(t.transDistanceY)>100||A?this.wrapMove(O,I,z,e):(p.scrollBar&&"start"!==B.moveStatus&&s(S,"opacity: 0;"),q&&this.refresh(),H&&this.loadEnd())},wrapMove:function(t,n,e,r){var a=this;B.start({el:h,target:{translateY:t},type:e,time:n,s:r||.7,inCallBack:function(t){k=t.translateY,p.bounce||(k>=T&&B.stop(function(t){k=T,B.transform(h,"translateY",k)}),k<=D&&B.stop(function(t){k=D,B.transform(h,"translateY",D)})),k<=x&&!X&&J.top&&(X=!0,p.loadMore.onLoadMore.call(a)),L&&p.pullDown.onAfter(t.translateY),p.scrollBar&&o(-t.translateY*M),p.onTransMove.call(this,k)},endCallBack:function(t){k=t.translateY,q&&a.refresh(),H&&a.loadEnd(),p.scrollBar&&s(S,"opacity: 0;"),p.onTransMoveEnd.call(this,k),j=!1,A=!1,p.onMotionStop(k)}})},scrollTo:function(t,n,e){var o;"string"==typeof t?o=document.querySelector(t):t instanceof Element&&(o=t),o&&(u(h,o)||f("ScrollTo function argument error, `child` must be a child of `parent`"),t=-c(h,o).top),e&&(t>T||D>0)?t=T:e&&t<D&&(t=D),N=k=t,B.stop(),this.wrapMove(t,n,"easeOutStrong")},loadEnd:function(t){if("start"===B.moveStatus||Z)return H=!0,G=t||d,!1;(t||G)(),H=!1,X=!1,this.refreshSize()},refresh:function(t){if("start"===B.moveStatus||Z)return q=!0,P=t||d,!1;(t||P)(),R=!1,q=!1,T=Y,this.refreshSize(),l(h).translateY>T&&(L=!0,this.scrollTo(T,500))},refreshSize:function(){v=parseFloat(a(h,"height")),g=m.clientHeight,D=g-v,Y=T=0,x=D<0?D+p.loadMore.distance:0,p.scrollBar=!(D>=0)&&U,p.scrollBar&&(M=g/v,b=g*M,w=b<w?b:w,E=-T*M,y=-D*M,e(m,b))}}}}});